#ifndef WARP_BUILD_ENABLE_DEVSI1145
#define WARP_BUILD_ENABLE_DEVSI1145
#endif


//Register addresses
#define SI1145_REG_PART_ID  0x00
#define SI1145_REG_REV_ID  0x01
#define SI1145_REG_SEQ_ID  0x02
#define SI1145_REG_INT_CFG  0x03
#define SI1145_REG_IRQ_ENABLE  0x04
#define SI1145_REG_HW_KEY  0x07
#define SI1145_REG_MEAS_RATE0  0x08
#define SI1145_REG_MEAS_RATE1  0x09
#define SI1145_REG_PS_RATE  0x0A
#define SI1145_REG_PS_LED21  0x0F
#define SI1145_REG_PS_LED3  0x10
#define SI1145_REG_UCOEF0  0x13
#define SI1145_REG_UCOEF1  0x14
#define SI1145_REG_UCOEF2  0x15
#define SI1145_REG_UCOEF3  0x16
#define SI1145_REG_PARAM_WR  0x17
#define SI1145_REG_COMMAND 0x18
#define SI1145_REG_RESPONSE  0x20
#define SI1145_REG_IRQ_STATUS  0x21
#define SI1145_REG_ALS_VIS_DATA0  0x22
#define SI1145_REG_ALS_VIS_DATA1  0x23
#define SI1145_REG_ALS_IR_DATA0  0x24
#define SI1145_REG_ALS_IR_DATA1  0x25
#define SI1145_REG_PS1_DATA0  0x26
#define SI1145_REG_PS1_DATA1  0x27
#define SI1145_REG_PS2_DATA0  0x28
#define SI1145_REG_PS2_DATA1  0x29
#define SI1145_REG_PS3_DATA0  0x2A
#define SI1145_REG_PS3_DATA1  0x2B
#define SI1145_REG_AUX_DATA0_UVINDEX0  0x2C
#define SI1145_REG_AUX_DATA1_UVINDEX_1  0x2D
#define SI1145_REG_PARAM_RD  0x2E
#define SI1145_REG_CHIP_STAT  0x30
#define SI1145_REG_ANA_IN_KEY  0x3B

//Parameters
#define SI1145_PARAM_I2CADDR 0x00

#define SI1145_PARAM_CHLIST 0x01
#define SI1145_PARAM_CHLIST_EN_UV 0x80
#define SI1145_PARAM_CHLIST_EN_AUX 0x40
#define SI1145_PARAM_CHLIST_EN_ALS_IR 0x20
#define SI1145_PARAM_CHLIST_EN_ALS_VIS 0x10
#define SI1145_PARAM_CHLIST_EN_PS3 0x04
#define SI1145_PARAM_CHLIST_EN_PS2 0x02
#define SI1145_PARAM_CHLIST_EN_PS1 0x01

#define SI1145_PARAM_PSLED12_SELECT 0x02
#define SI1145_PARAM_PSLED12_SELECT_PS2_LED1 0x10
#define SI1145_PARAM_PSLED12_SELECT_PS1_LED1 0x01
 
#define SI1145_PARAM_PSLED3_SELECT 0x03
#define SI1145_PARAM_PSLED3_SELECT_PS3_LED1 0x01

#define SI1145_PARAM_PS_ENCODING 0x05

#define SI1145_PARAM_ALS_ENCODING 0x06

#define SI1145_PARAM_PS1_ADCMUX 0x07
#define SI1145_PARAM_PS2_ADCMUX 0x08
#define SI1145_PARAM_PS3_ADCMUX 0x09
#define SI1145_PARAM_PS_ADC_COUNTER 0x0A
#define SI1145_PARAM_PS_ADC_GAIN 0x0B
#define SI1145_PARAM_PS_ADC_MISC 0x0C
#define SI1145_PARAM_ALS_IR_ADCMUX 0x0E
#define SI1145_PARAM_AUX_ADCMUX 0x0F
#define SI1145_PARAM_ALS_VIS_ADC_COUNTER 0x10
#define SI1145_PARAM_ALS_VIS_ADC_GAIN 0x11
#define SI1145_PARAM_ALS_VIS_ADC_MISC 0x12
#define SI1145_PARAM_LED_REC 0x1C
#define SI1145_PARAM_ALS_IR_ADC_COUNTER 0x1D
#define SI1145_PARAM_ALS_IR_ADC_GAIN 0x1E
#define SI1145_PARAM_ALS_IR_ADC_MISC 0x1F


//Commands
#define SI1145_CMD_PARAM_QUERY 0x80
#define SI1145_CMD_PARAM_SET 0xA0
#define SI1145_CMD_NOP 0x00
#define SI1145_CMD_RESET 0x01
#define SI1145_CMD_BUSADDR 0x02
#define SI1145_CMD_PS_FORCE 0x05
#define SI1145_CMD_GET_CAL 0x12
#define SI1145_CMD_ALS_FORCE 0x06
#define SI1145_CMD_PSALS_FORCE 0x07
#define SI1145_CMD_PS_PAUSE 0x09
#define SI1145_CMD_ALS_PAUSE 0x0A
#define SI1145_CMD_PSALS_PAUSE 0x0B

void    initSI1145(const uint8_t i2cAddress, WarpI2CDeviceState volatile * deviceStatePointer);
void    resetSI1145();
WarpStatus writeSensorRegisterSI1145(uint8_t deviceRegister, uint8_t payload, uint16_t pullupValue);
WarpStatus readSensorRegisterSI1145(uint8_t deviceRegister, uint8_t numberOfBytes);

uint16_t si1145ReadUV();
uint16_t si1145ReadVisibleLight();
uint16_t si1145ReadIR();
uint8_t si1145ReadTest();